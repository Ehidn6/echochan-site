:root{color-scheme:dark;--bg: #111111;--panel: #171717;--panel-2: #1d1d1d;--text: #e6e6e6;--muted: #a0a0a0;--accent: #d0d0d0;--border: rgba(255, 255, 255, .08)}*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Segoe UI,Inter,system-ui,sans-serif;background:var(--bg);color:var(--text)}#app{height:100%;display:grid;grid-template-columns:260px 1fr;background:var(--bg)}body.sidebar-collapsed #app{grid-template-columns:0 1fr}body.sidebar-collapsed .sidebar{width:0;padding:0;border-right:none;overflow:hidden}body.sidebar-collapsed .sidebar>*{display:none}.sidebar{background:var(--panel);border-right:1px solid var(--border);padding:14px;display:flex;flex-direction:column;gap:12px}.sidebar-title{font-weight:600;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}.room-list{flex:1;overflow:auto;border:none;border-radius:0;background:transparent;padding:0;display:flex;flex-direction:column;gap:0}.room{padding:10px 6px;border-radius:0;cursor:pointer;display:flex;justify-content:space-between;align-items:center;gap:8px;border-bottom:1px solid var(--border)}.room.active{background:transparent;border-bottom-color:#ffffff2e}.room span.count{color:var(--muted);font-size:12px}.room-remove{border:none;background:transparent;color:var(--muted);width:20px;height:20px;border-radius:0;padding:0;line-height:1}.room-remove:hover{color:var(--text);border-color:transparent}.command-box{display:grid;grid-template-columns:1fr auto;gap:8px}.command-box input{width:100%;padding:8px 10px;border-radius:8px;border:1px solid var(--border);background:#101010;color:var(--text)}.status{font-size:12px;color:var(--muted)}.main{display:flex;flex-direction:column;height:100%;position:relative}.main{height:100vh}.toolbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--border);background:var(--panel)}.room-label{font-weight:600}.room-label{display:flex;align-items:center;gap:8px}.sidebar-toggle{display:none;width:32px;height:32px;font-size:16px;line-height:1}.sidebar-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#00000073;opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:15;border:none}.toolbar-actions{display:flex;gap:8px;align-items:center}.now-playing{display:inline-flex;align-items:center;gap:10px;border:1px solid var(--border);border-radius:999px;padding:4px 8px 4px 12px;background:#101010;font-size:12px;color:var(--muted)}.now-playing.empty{opacity:.6}.np-info{display:grid;gap:2px}.np-title{color:var(--text);font-weight:600;max-width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.np-meta{font-size:11px;color:var(--muted)}.np-actions{display:inline-flex;gap:6px;align-items:center}.now-playing .icon-btn{width:28px;height:28px;border-radius:999px;border:1px solid var(--border);font-size:12px}.toolbar-actions select{padding:6px 10px;border-radius:8px;border:1px solid var(--border);background:#101010;color:var(--text)}.p2p-inbox{display:none}.relay-errors{padding:10px 16px;border-bottom:1px solid var(--border);background:#140f0f;color:#e5bcbc;font-size:12px;display:grid;gap:6px}.relay-errors.hidden{display:none}.relay-errors .title{font-weight:600;color:#f0c8c8}.relay-errors .item{border:1px solid rgba(200,90,90,.5);border-radius:8px;padding:6px 8px;background:#50141440}.toast-stack{position:absolute;top:12px;left:16px;right:16px;z-index:10;display:grid;gap:8px;pointer-events:none}.toast{border:1px solid var(--border);background:#1a1a1a;color:var(--text);padding:8px 10px;border-radius:10px;font-size:12px;box-shadow:0 6px 18px #00000059;pointer-events:auto}.toast.error{border-color:#c85a5a99;color:#f0caca;background:#3c1010d9}.p2p-card{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--border);padding:8px 10px;border-radius:8px;background:var(--panel-2)}.p2p-card .actions{display:flex;gap:6px}.messages{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:0;align-items:stretch}.jump-latest{position:absolute;right:20px;bottom:88px;z-index:7;border-radius:999px;padding:8px 14px;font-size:12px;border:1px solid var(--border);background:#1a1a1a;color:var(--text)}.jump-latest.hidden{display:none}.messages>.message,.messages>.empty-state,.day-separator{width:min(100%,980px);margin-left:auto;margin-right:auto}.empty-state{border:1px dashed var(--border);padding:16px;border-radius:10px;color:var(--muted);background:#141414;font-size:13px}.message{background:transparent;border:none;border-radius:0;padding:6px 0;margin:0;box-shadow:none}.message+.message{border-top:1px solid var(--border)}.message.flash{box-shadow:inset 0 0 0 1px #c8c8c840}.message:has(.meta.compact){margin-top:8px}.message-body{display:block}.message-body.has-media{display:flex;gap:12px;align-items:flex-start}.message-body.media-only{display:block}.message-body.media-only .attachments{width:100%}.message-body.media-only .attachments,.message-body.media-only .message-content{grid-column:auto}.message-body.media-only .youtube-embed{aspect-ratio:21 / 9;max-height:280px}.message-body.media-only .youtube-embed,.message-body.media-only .spotify-embed,.message-body.media-only .yandex-embed{width:100%}.youtube-embed{width:100%;height:auto;aspect-ratio:16 / 9}.message-content{display:grid;gap:8px;flex:1}.message.system{color:var(--muted);background:none;border:none;font-size:12px}.message .meta{display:flex;align-items:center;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:4px}.message .meta.compact{margin-bottom:4px;justify-content:flex-start;font-size:11px;opacity:.6}.day-separator{text-align:center;font-size:11px;color:var(--muted);padding:10px 0;border:none;background:transparent;margin-top:8px;letter-spacing:.08em;text-transform:uppercase}.reply-tooltip{position:fixed;z-index:50;max-width:240px;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:#111;color:var(--text);font-size:12px;line-height:1.4;white-space:pre-wrap;opacity:0;transform:translateY(-6px);pointer-events:none;transition:opacity .12s ease,transform .12s ease}.reply-tooltip.visible{opacity:1;transform:translateY(-12px)}.meta-left{display:inline-flex;align-items:center;gap:8px}.meta-left .nick{font-weight:600}.reply-btn{border:1px solid var(--border);background:transparent;color:var(--muted);font-size:11px;padding:2px 8px;border-radius:999px;opacity:0;margin-left:auto;transition:opacity .2s ease}.message:hover .reply-btn{opacity:1}.reply-snippet-inline{border-left:2px solid rgba(150,150,150,.45);padding-left:10px;margin:6px 0 10px;font-size:13px;color:#d2d2d2bf;cursor:pointer}.reply-snippet-inline:hover{color:var(--text)}.message .text{white-space:pre-wrap}.message .attachments{display:grid;gap:8px;flex:0 0 220px}.message .attachments img{width:100%;height:auto;border-radius:6px;border:none;max-height:min(36vh,400px);object-fit:contain;background:transparent}.youtube-embed{margin-top:8px;border-radius:6px;overflow:hidden;border:none;background:transparent;position:relative;width:220px;aspect-ratio:16 / 9;min-height:260px;max-height:260px}.youtube-embed iframe{width:100%;height:100%;border:0}.spotify-embed{margin-top:8px;border-radius:6px;overflow:hidden;border:none;background:transparent;position:relative;width:220px;height:152px}.spotify-embed iframe{width:100%;height:100%;border:0}.yandex-embed{margin-top:8px;border-radius:6px;overflow:hidden;border:none;background:transparent;position:relative;width:220px;height:180px}.embed-overlay{position:absolute;top:0;right:0;bottom:0;left:0;border:none;background:#00000059;color:#fff;font-size:12px;letter-spacing:.02em;cursor:pointer;display:grid;place-items:center}.embed-overlay.hidden{display:none}.embed-overlay:hover{background:#00000073}.yandex-embed iframe{width:100%;height:100%;border:0}.composer{border-top:1px solid var(--border);background:var(--panel);padding:12px 16px;display:grid;grid-template-columns:1fr auto;gap:12px;align-items:stretch;position:relative;overflow:visible}.reply-bar{border:1px solid var(--border);border-radius:10px;padding:6px 10px;display:grid;grid-template-columns:1fr auto;gap:6px 10px;align-items:center;background:#141414;font-size:12px;color:var(--muted)}.reply-bar.hidden{display:none}.reply-info{display:inline-flex;gap:6px;align-items:center}.reply-nick{color:var(--text);font-weight:600}.reply-snippet{grid-column:1 / -1;color:var(--text);font-size:12px;opacity:.8}.reply-cancel{border:1px solid var(--border);background:transparent;color:var(--muted);width:24px;height:24px;border-radius:6px;padding:0}.reply-cancel:hover{color:var(--text);border-color:var(--accent)}.composer{position:sticky;bottom:0;z-index:6}.composer-inputs{display:flex;flex-direction:column;gap:8px;align-self:stretch;height:100%}.composer textarea{width:100%;min-height:44px;padding:10px;border-radius:8px;border:none;outline:none;background:#101010;color:var(--text);resize:none;overflow:hidden;flex:1 1 auto}.composer-actions{display:grid;grid-auto-rows:32px;gap:8px;justify-items:center;align-content:end;align-self:stretch;padding-bottom:2px}@media (max-width: 900px){#app{grid-template-columns:1fr;grid-template-rows:1fr}.sidebar{position:fixed;inset:0 auto 0 0;width:min(78vw,320px);z-index:20;transform:translate(-100%);transition:transform .2s ease;border-right:1px solid var(--border);border-bottom:none;padding:12px;gap:8px}body.sidebar-open .sidebar{transform:translate(0)}.sidebar-title{font-size:11px;letter-spacing:.06em}.room-list{flex-direction:column;overflow:auto;white-space:normal;gap:6px}.room{flex:0 0 auto}.sidebar-toggle{display:inline-flex}body.sidebar-open .sidebar-overlay{opacity:1;pointer-events:auto}.command-box{grid-template-columns:1fr auto}.toolbar{position:sticky;top:0;z-index:5;padding:10px 12px}.now-playing{display:none}.toolbar-actions select{max-width:120px}.messages{padding:12px;gap:10px}.jump-latest{right:12px;bottom:76px}.message-body.has-media{grid-template-columns:minmax(96px,140px) 1fr}.message-body.media-only{grid-template-columns:1fr}.message-body.media-only .youtube-embed{aspect-ratio:18 / 9;max-height:220px}.message .attachments img{max-height:min(28vh,200px)}.youtube-embed{aspect-ratio:16 / 9;min-height:200px;max-height:200px}.composer{position:sticky;bottom:0;z-index:6;grid-template-columns:1fr;gap:8px;padding:10px 12px}.composer-actions{grid-auto-flow:column;grid-auto-rows:auto;grid-auto-columns:36px;justify-content:flex-end;align-content:center;padding-bottom:0}.composer textarea{min-height:40px}.inline-previews img{width:60px;height:60px}.modal-content{width:100%;max-height:100vh;height:100vh;border-radius:0;padding:14px 12px 20px}}.inline-previews{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}.inline-previews img{width:72px;height:72px;object-fit:cover;border-radius:8px;border:1px solid var(--border)}.inline-previews:empty{display:none}button{padding:6px 12px;border-radius:8px;border:1px solid var(--border);background:#1b1b1b;color:var(--text);cursor:pointer;height:32px;line-height:1}button:hover{border-color:var(--accent)}.icon-btn{width:36px;height:32px;padding:0;display:inline-flex;align-items:center;justify-content:center}.icon-btn svg{width:18px;height:18px;stroke:var(--text);stroke-width:1.6;fill:none}.icon-btn:hover svg{stroke:var(--accent)}.modal{position:fixed;top:0;right:0;bottom:0;left:0;background:#0a0a0adb;display:flex;align-items:center;justify-content:center}.modal.hidden{display:none}.modal-content{background:var(--panel);border:1px solid var(--border);padding:18px;border-radius:12px;width:min(560px,92vw);display:grid;gap:12px;max-height:86vh;overflow:auto}.viewer-content{max-width:min(90vw,980px);max-height:90vh;display:grid;place-items:center}.viewer-content img{max-width:100%;max-height:90vh;border-radius:12px;border:1px solid var(--border);background:#0b0b0b}.modal-content.confirm{width:min(420px,90vw)}.confirm-body{font-size:13px;color:var(--muted)}.confirm-actions{gap:8px}.modal-content label{display:grid;gap:6px;font-size:12px;color:var(--muted)}.modal-content input,.modal-content textarea{padding:8px 10px;border-radius:8px;border:1px solid var(--border);background:#101010;color:var(--text)}.relay-status-list{border:1px solid var(--border);border-radius:8px;background:#101010;padding:8px;display:grid;gap:6px;font-size:12px;color:var(--muted);min-height:72px}.relay-status-item{display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center}.relay-status-item button{border:1px solid var(--border);background:transparent;color:var(--muted);height:26px;padding:0 10px;border-radius:999px;font-size:11px}.relay-status-item button:hover{color:var(--text);border-color:var(--accent)}.relay-status-item .error{grid-column:1 / -1;font-size:11px;color:#d8a6a6}.relay-status-item .state{padding:2px 8px;border-radius:999px;border:1px solid var(--border);font-size:11px;text-transform:capitalize}.relay-status-item .state.connected{color:#d6ffd6;border-color:#50b45099}.relay-status-item .state.error{color:#ffb9b9;border-color:#c8505099}.relay-status-item .state.reconnecting{color:#ffd7a0;border-color:#c88c3c99}.modal-header{display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:var(--panel);padding-bottom:8px;z-index:2}.modal-header button{min-height:36px;padding:6px 12px}.modal-actions{display:flex;justify-content:flex-end;position:sticky;bottom:0;background:var(--panel);padding-top:8px;padding-bottom:8px;z-index:2}.hint{color:var(--muted);font-size:11px;margin-top:6px}
